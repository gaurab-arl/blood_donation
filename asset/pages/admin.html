<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloodLink - Live Blood Inventory</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-logo">
            <img src="../img/blood.png" alt="Logo">
            <span>Lifeline</span>
        </div>
        <nav>
            <a href="#" class="active">Dashboard</a>
            <a href="#">Inventory</a>
            <a href="#">Donors</a>
            <a href="#">Requests</a>
            <a href="#">Reports</a>
            <a href="setting.html?role=admin">Settings</a>
        </nav>
        <div class="user-info">
            <i class="fas fa-bell"></i>
            <img src="../img/user.png" alt="User" style="width: 40px; height: 40px;">
            <span>Dr. Sarah Cole</span>
        </div>
    </header>

    <!-- Critical Alert -->
    <div class="alert-banner" id="alertBanner">
        <i class="fas fa-exclamation-triangle"></i>
        <span>CRITICAL ALERT: O- reserves at critical low in Sector 4. Immediate attention required.</span>
        <i class="fas fa-times" id="closeAlert" style="margin-left: auto; cursor: pointer;"></i>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <div class="header-content">
                <h1>Live Blood Inventory</h1>
                <p>Real-time tracking of blood availability across regional centers.</p>
            </div>
            <div class="header-actions">
                <button class="btn-secondary">
                    <i class="fas fa-download"></i>
                    Export Report
                </button>
                <button class="btn-primary">
                    <i class="fas fa-sync"></i>
                    Sync Data
                </button>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="main-grid">
            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Filters -->
                <div class="filters-card">
                    <h3>
                        <i class="fas fa-filter"></i>
                        Filters
                    </h3>

                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Search Hospital, ID, or Region...">
                    </div>

                    <!-- Blood Type Filters -->
                    <div class="filter-section">
                        <h4>BLOOD TYPE</h4>
                        <div class="blood-type-buttons">
                            <button class="blood-btn active">All</button>
                            <button class="blood-btn">A+</button>
                            <button class="blood-btn">A-</button>
                            <button class="blood-btn">B+</button>
                            <button class="blood-btn">B-</button>
                            <button class="blood-btn">O+</button>
                            <button class="blood-btn">O-</button>
                            <button class="blood-btn">AB+</button>
                        </div>
                    </div>

                    <!-- Quantity Slider -->
                    <div class="filter-section">
                        <h4>MIN. QUANTITY (UNITS): <span id="sliderValue">0</span></h4>
                        <input type="range" class="quantity-slider" id="quantitySlider" min="0" max="500" value="0">
                        <div class="slider-labels">
                            <span>0</span>
                            <span>500+</span>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="stat-content">
                        <h4>TOTAL UNITS</h4>
                        <div class="stat-number">12,450</div>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            +5% today
                        </div>
                    </div>
                </div>

                <div class="stat-card critical">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <h4>CRITICAL LOW</h4>
                        <div class="stat-number">O- / AB-</div>
                        <div class="stat-status">Immediate action</div>
                    </div>
                </div>

                <!-- Incoming Batches -->
                <div class="incoming-batches">
                    <div class="section-header">
                        <h3>Incoming Batches</h3>
                        <a href="#" class="view-all">View All</a>
                    </div>

                    <div class="batch-item">
                        <div class="blood-type-badge">A+</div>
                        <div class="batch-details">
                            <h4>City General</h4>
                            <p>In Transit • 25 Units</p>
                        </div>
                        <div class="batch-time">14m</div>
                    </div>

                    <div class="batch-item">
                        <div class="blood-type-badge">O+</div>
                        <div class="batch-details">
                            <h4>North Wing</h4>
                            <p>Processing • 12 Units</p>
                        </div>
                        <div class="batch-time">32m</div>
                    </div>

                    <div class="batch-item">
                        <div class="blood-type-badge">B-</div>
                        <div class="batch-details">
                            <h4>Mobile Unit 4</h4>
                            <p>Collected • 8 Units</p>
                        </div>
                        <div class="batch-time">1h</div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Globe Visualization -->
                <div class="globe-card">
                    <div class="globe-header">
                        <div class="status-badge">
                            <span class="status-dot green"></span>
                            <div>
                                <div class="status-label">GLOBAL STATUS</div>
                                <div class="status-value">Operational</div>
                            </div>
                        </div>
                        <div class="nodes-info">
                            <div class="nodes-label">ACTIVE NODES</div>
                            <div class="nodes-value">42 Locations</div>
                        </div>
                    </div>

                    <div class="globe-container">
                        <canvas id="globe"></canvas>
                        <!-- Location markers -->
                        <div class="location-marker central">
                            <div class="marker-label">Central Hub<br><span>Normal</span></div>
                        </div>
                        <div class="location-marker critical">
                            <div class="marker-label">Sector 4<br><span>CRITICAL</span></div>
                        </div>
                    </div>

                    <div class="globe-controls">
                        <button class="control-btn"><i class="fas fa-plus"></i></button>
                        <button class="control-btn"><i class="fas fa-minus"></i></button>
                        <button class="control-btn"><i class="fas fa-crosshairs"></i></button>
                    </div>
                </div>

                <!-- Regional Inventory Table -->
                <div class="inventory-section">
                    <div class="section-header">
                        <h2>Regional Inventory</h2>
                        <a href="#" class="full-report">Full Report <i class="fas fa-arrow-right"></i></a>
                    </div>

                    <table class="inventory-table">
                        <thead>
                            <tr>
                                <th>BLOOD TYPE</th>
                                <th>BATCH ID</th>
                                <th>LOCATION</th>
                                <th>QUANTITY</th>
                                <th>EXPIRY</th>
                                <th>STATUS</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                            <tr data-blood-type="A+" data-quantity="45" data-location="Central Hospital"
                                data-batch="#88392-AX">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon a-positive">A+</span>
                                        A Positive
                                    </div>
                                </td>
                                <td>#88392-AX</td>
                                <td>Central Hospital</td>
                                <td><strong>45 Units</strong></td>
                                <td>24 Days</td>
                                <td><span class="status-badge available">Available</span></td>
                            </tr>
                            <tr data-blood-type="O-" data-quantity="2" data-location="Sector 4 Clinic"
                                data-batch="#99210-BZ">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon o-negative">O-</span>
                                        O Negative
                                    </div>
                                </td>
                                <td>#99210-BZ</td>
                                <td>Sector 4 Clinic</td>
                                <td><strong class="critical-qty">2 Units</strong></td>
                                <td>12 Days</td>
                                <td><span class="status-badge low-stock">Low Stock</span></td>
                            </tr>
                            <tr data-blood-type="B+" data-quantity="120" data-location="West Wing Lab"
                                data-batch="#77219-XY">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon b-positive">B+</span>
                                        B Positive
                                    </div>
                                </td>
                                <td>#77219-XY</td>
                                <td>West Wing Lab</td>
                                <td><strong>120 Units</strong></td>
                                <td>30 Days</td>
                                <td><span class="status-badge reserved">Reserved</span></td>
                            </tr>
                            <tr data-blood-type="AB+" data-quantity="15" data-location="St. Mary's"
                                data-batch="#66120-CC">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon ab-positive">AB+</span>
                                        AB Positive
                                    </div>
                                </td>
                                <td>#66120-CC</td>
                                <td>St. Mary's</td>
                                <td><strong>15 Units</strong></td>
                                <td>18 Days</td>
                                <td><span class="status-badge available">Available</span></td>
                            </tr>
                            <tr data-blood-type="A-" data-quantity="30" data-location="North Medical Center"
                                data-batch="#55301-DX">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon a-positive">A-</span>
                                        A Negative
                                    </div>
                                </td>
                                <td>#55301-DX</td>
                                <td>North Medical Center</td>
                                <td><strong>30 Units</strong></td>
                                <td>15 Days</td>
                                <td><span class="status-badge available">Available</span></td>
                            </tr>
                            <tr data-blood-type="O+" data-quantity="85" data-location="City General"
                                data-batch="#44112-EY">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon o-negative">O+</span>
                                        O Positive
                                    </div>
                                </td>
                                <td>#44112-EY</td>
                                <td>City General</td>
                                <td><strong>85 Units</strong></td>
                                <td>28 Days</td>
                                <td><span class="status-badge available">Available</span></td>
                            </tr>
                            <tr data-blood-type="B-" data-quantity="8" data-location="East Side Hospital"
                                data-batch="#33220-FZ">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon b-positive">B-</span>
                                        B Negative
                                    </div>
                                </td>
                                <td>#33220-FZ</td>
                                <td>East Side Hospital</td>
                                <td><strong class="critical-qty">8 Units</strong></td>
                                <td>10 Days</td>
                                <td><span class="status-badge low-stock">Low Stock</span></td>
                            </tr>
                            <tr data-blood-type="AB-" data-quantity="5" data-location="Metro Clinic"
                                data-batch="#22334-GA">
                                <td>
                                    <div class="blood-type-cell">
                                        <span class="blood-icon ab-positive">AB-</span>
                                        AB Negative
                                    </div>
                                </td>
                                <td>#22334-GA</td>
                                <td>Metro Clinic</td>
                                <td><strong class="critical-qty">5 Units</strong></td>
                                <td>8 Days</td>
                                <td><span class="status-badge low-stock">Low Stock</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Alert Banner Close
        document.getElementById('closeAlert').addEventListener('click', function () {
            document.getElementById('alertBanner').style.display = 'none';
        });

        // Blood Type Filter Toggle
        const bloodButtons = document.querySelectorAll('.blood-btn');
        let activeBloodType = 'All';

        bloodButtons.forEach(button => {
            button.addEventListener('click', function () {
                bloodButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                activeBloodType = this.textContent.trim();
                filterTable();
            });
        });

        // Quantity Slider
        const quantitySlider = document.getElementById('quantitySlider');
        const sliderValue = document.getElementById('sliderValue');

        quantitySlider.addEventListener('input', function () {
            sliderValue.textContent = this.value;
            filterTable();
        });

        // Search Input
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', filterTable);

        // Filter Table Function
        function filterTable() {
            const searchTerm = searchInput.value.toLowerCase();
            const minQuantity = parseInt(quantitySlider.value);
            const rows = document.querySelectorAll('#inventoryTableBody tr');

            rows.forEach(row => {
                const bloodType = row.dataset.bloodType;
                const quantity = parseInt(row.dataset.quantity);
                const location = row.dataset.location.toLowerCase();
                const batch = row.dataset.batch.toLowerCase();

                const matchesBloodType = activeBloodType === 'All' || bloodType === activeBloodType;
                const matchesQuantity = quantity >= minQuantity;
                const matchesSearch = location.includes(searchTerm) || batch.includes(searchTerm);

                if (matchesBloodType && matchesQuantity && matchesSearch) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Export Report Button
        document.querySelector('.btn-secondary').addEventListener('click', function () {
            alert('Exporting report...\nThis would generate a PDF/Excel report of the current inventory.');
        });

        // Sync Data Button
        document.querySelector('.btn-primary').addEventListener('click', function () {
            const btn = this;
            const icon = btn.querySelector('i');

            icon.classList.add('fa-spin');
            btn.disabled = true;
            btn.style.opacity = '0.6';

            setTimeout(() => {
                icon.classList.remove('fa-spin');
                btn.disabled = false;
                btn.style.opacity = '1';
                alert('Data synchronized successfully!');
            }, 2000);
        });

        // Globe Controls (Visual feedback)
        const controlButtons = document.querySelectorAll('.control-btn');
        controlButtons.forEach(btn => {
            btn.addEventListener('click', function () {
                const icon = this.querySelector('i');
                if (icon.classList.contains('fa-plus')) {
                    console.log('Zoom in');
                } else if (icon.classList.contains('fa-minus')) {
                    console.log('Zoom out');
                } else if (icon.classList.contains('fa-crosshairs')) {
                    console.log('Reset view');
                }

                this.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 100);
            });
        });

        // Location Marker Click
        document.querySelectorAll('.location-marker').forEach(marker => {
            marker.addEventListener('click', function () {
                const label = this.querySelector('.marker-label').textContent;
                alert('Location Details:\n' + label);
            });
        });

        // Add hover effect to table rows
        const tableRows = document.querySelectorAll('#inventoryTableBody tr');
        tableRows.forEach(row => {
            row.addEventListener('click', function () {
                const bloodType = this.querySelector('.blood-type-cell').textContent.trim();
                const batch = this.dataset.batch;
                const location = this.dataset.location;
                const quantity = this.dataset.quantity;

                alert(`Blood Inventory Details:\n\nType: ${bloodType}\nBatch: ${batch}\nLocation: ${location}\nQuantity: ${quantity} Units`);
            });
        });

        // Incoming Batches - View All
        document.querySelector('.view-all').addEventListener('click', function (e) {
            e.preventDefault();
            alert('Showing all incoming batches...\nThis would open a detailed view of all pending deliveries.');
        });

        // Full Report Link
        document.querySelector('.full-report').addEventListener('click', function (e) {
            e.preventDefault();
            alert('Opening full report...\nThis would display a comprehensive inventory report with analytics.');
        });

        // Animate stats on load
        window.addEventListener('load', function () {
            const statNumbers = document.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const text = stat.textContent;
                stat.style.opacity = '0';
                stat.style.transform = 'translateY(20px)';

                setTimeout(() => {
                    stat.style.transition = 'all 0.6s ease';
                    stat.style.opacity = '1';
                    stat.style.transform = 'translateY(0)';
                }, 300);
            });
        });

        // Real-time clock for dashboard
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString();
            console.log('Dashboard Time:', timeString);
        }

        setInterval(updateTime, 1000);

        // Notification bell click
        document.querySelector('.user-info .fa-bell').addEventListener('click', function () {
            alert('Notifications:\n\n• O- blood critically low at Sector 4\n• New donor registration: John Doe (A+)\n• Batch #88392-AX will expire in 24 days\n• Request fulfilled for AB+ at Metro Clinic');
        });
    </script>
</body>

</html>